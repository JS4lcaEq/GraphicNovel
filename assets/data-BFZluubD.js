import{e as N,f as c,g as d}from"./index-BqZ4HdZB.js";const w=N("data",()=>{const n=c([{id:1,text:"Start Scene",buttons:[{id:1,text:"Next",go:2}]},{id:2,text:"Middle Scene",buttons:[{id:2,text:"Back",go:1},{id:3,text:"next",go:3}]},{id:3,text:"End Scene",buttons:[{id:4,text:"Back",go:1}]}]),u=c(null),x=d(()=>r(u.value)),g=()=>{localStorage.setItem("data",JSON.stringify(n.value))},m=()=>{const e=localStorage.getItem("data");e&&(console.log("data.js:load savedData=",e),n.value=JSON.parse(e))},v=e=>{n.value=JSON.parse(e)},f=()=>{const t={id:n.value.length>0?Math.max(...n.value.map(a=>a.id))+1:1,text:"New Scene",buttons:[],bg:null};return n.value.push(t),t},p=e=>{const t=n.value.find(a=>a.id===e);if(t){const s={id:o.value.length>0?Math.max(...o.value.map(i=>i.id?i.id:0))+1:1,text:"New Button ",go:null};return console.log("data.js:addButton newButton=",s),t.buttons.push(s),s}return null},S=e=>{const t=n.value.findIndex(a=>a.id===e);return t!==-1?(n.value.splice(t,1),!0):!1},l=d(()=>n.value.map(e=>({id:e.id,text:e.text,bg:e.bg,className:e.className}))),o=d(()=>{const e=[];return n.value.forEach(t=>{t.buttons.forEach(a=>{e.push({id:a.id,text:a.text,go:a.go,from:t.id})})}),e}),r=e=>{const t=n.value.find(s=>s.id===e),a=t?t.buttons.map(s=>({id:s.id,text:s.text,go:s.go})):[];return t?{id:t.id,text:t.text,bg:t.bg,className:t.className,buttons:a}:null},h=d(()=>{let e=`graph TD
`;return l.value.forEach(t=>{e+=`    p${t.id}["${t.id}:${t.text}"]
`}),o.value.forEach(t=>{e+=`    p${t.from} -->|${t.id}:${t.text}| p${t.go}
`}),e});return{data:n,pages:l,buttons:o,mermaid:h,selectedNodeId:u,selectedNode:x,save:g,load:m,get:r,set:v,add:f,addButton:p,del:S,isExistsInputButtonGo:e=>o.value.some(t=>t.go==e),updateSingleElement:e=>{console.log("data.js:updateSingleElement newElement=",e);const t=n.value.findIndex(a=>a.id===e.id);return t!==-1?(n.value[t]={...e},!0):!1}}});export{w as u};
