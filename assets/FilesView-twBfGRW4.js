import{u as f}from"./data-BFZluubD.js";import{c as m,a as l,b as w,d as p,t as c,m as i,w as N,r as O,o as S}from"./index-BqZ4HdZB.js";const b=(d,t)=>{const n=URL.createObjectURL(d),e=document.createElement("a");e.href=n,e.download=t||"data.json",document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(n)},J=()=>({downloadJSON:(t,n="data.json")=>{try{if(typeof t!="string")throw new Error("Аргумент должен быть строкой JSON");const e=new Blob([t],{type:"application/json"});b(e,n)}catch(e){console.error("Ошибка скачивания JSON:",e)}}}),v={class:"file-view"},j={__name:"FilesView",setup(d){const t=f(),{downloadJSON:n}=J(),e=u=>{const o=u.target.files[0];if(o){const r=new FileReader;r.onload=s=>{try{const a=s.target.result;t.set(a),t.save(),console.log("Uploaded JSON Data:",a),alert("Файл загружен и сохранен в хранилище.")}catch(a){alert("Error parsing JSON file: "+a.message)}},r.readAsText(o)}};return(u,o)=>{const r=O("el-button");return S(),m("div",v,[o[3]||(o[3]=l("h2",null,"file view",-1)),o[4]||(o[4]=l("p",null,"=======================",-1)),l("p",null,c(i(t).data),1),o[5]||(o[5]=l("p",null,"=======================",-1)),w(r,{onClick:o[0]||(o[0]=s=>i(n)(JSON.stringify(i(t).data,null,2),"data.json"))},{default:N(()=>[...o[2]||(o[2]=[p("Выгрузить JSON",-1)])]),_:1}),o[6]||(o[6]=l("p",null,"=======================",-1)),o[7]||(o[7]=p(" Загрузить JSON: ",-1)),l("input",{type:"file",id:"fileInput",onChange:o[1]||(o[1]=s=>e(s))},null,32)])}}};export{j as default};
